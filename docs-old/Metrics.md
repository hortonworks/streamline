# Topology Metrics API

## Streaming Engine 

### Get topology components metrics

`GET /api/v1/metrics/topologies/:topologyId`

*Success Response*

```json
{
   "responseCode":1000,
   "responseMessage":"Success",
   "entity":{
      "Max_Driver_ID":{
         "componentName":"Max_Driver_ID",
         "inputRecords":2920,
         "outputRecords":40,
         "failedRecords":0,
         "processedTime":15345.012
      },
      "SOURCE":{
         "componentName":"SOURCE",
         "inputRecords":0,
         "outputRecords":3020,
         "failedRecords":0,
         "processedTime":0.0
      },
      "Max_Truck_ID":{
         "componentName":"Max_Truck_ID",
         "inputRecords":2920,
         "outputRecords":40,
         "failedRecords":0,
         "processedTime":16321.231
      },
      "RULE":{
         "componentName":"RULE",
         "inputRecords":3020,
         "outputRecords":2920,
         "failedRecords":0,
         "processedTime":0.486
      }
   }
}
```

## Time-series DB


### Get Component Statistics

`GET /api/v1/metrics/topologies/:topologyId/components/:componentId/component_stats?from=:from&to=:to`

The `componentId` represents the ID of TopologyComponent. (Source, Processor, Sink)
The `from` and `to` represents `timestamp` which unit is `millisecond`.

*Success Response*

```json
{
   "responseCode":1000,
   "responseMessage":"Success",
   "entity":{
      "outputRecords":{
         "1465820100000":10240.0,
         "1465820160000":0.0,
         "1465820220000":20.0,
         "1465820280000":0.0,
         "1465820340000":0.0,
         "1465820400000":0.0,
         "1465820460000":2620.0,
         "1465820520000":0.0,
         "1465820580000":0.0,
         "1465820640000":0.0,
         "1465820700000":0.0,
         "1465820760000":0.0,
         "1465820820000":0.0,
         "1465820880000":0.0,
         "1465820940000":20.0,
         "1465821000000":0.0,
         "1465821060000":0.0,
         "1465821120000":0.0,
         "1465821180000":0.0,
         "1465821240000":0.0,
         "1465821300000":0.0,
         "1465821360000":0.0,
         "1465821420000":0.0,
         "1465821480000":0.0,
         "1465821540000":0.0
      },
      "failedRecords":{

      },
      "inputRecords":{
         "1465820100000":10560.0,
         "1465820160000":0.0,
         "1465820220000":0.0,
         "1465820280000":0.0,
         "1465820340000":0.0,
         "1465820400000":0.0,
         "1465820460000":1300.0,
         "1465820520000":0.0,
         "1465820580000":0.0,
         "1465820640000":0.0,
         "1465820700000":0.0,
         "1465820760000":0.0,
         "1465820820000":0.0,
         "1465820880000":0.0,
         "1465820940000":0.0,
         "1465821000000":0.0,
         "1465821060000":0.0,
         "1465821120000":0.0,
         "1465821180000":0.0,
         "1465821240000":0.0,
         "1465821300000":0.0,
         "1465821360000":0.0,
         "1465821420000":0.0,
         "1465821480000":0.0,
         "1465821540000":0.0
      },
      "recordsInWaitQueue":{
         "1465820100000":1.0,
         "1465820160000":1.0,
         "1465820220000":1.0,
         "1465820280000":1.0,
         "1465820340000":1.0,
         "1465820400000":1.0,
         "1465820460000":1.0,
         "1465820520000":1.0,
         "1465820580000":1.0,
         "1465820640000":1.0,
         "1465820700000":1.0,
         "1465820760000":1.0,
         "1465820820000":1.0,
         "1465820880000":1.0,
         "1465820940000":1.0,
         "1465821000000":1.0,
         "1465821060000":1.0,
         "1465821120000":1.0,
         "1465821180000":1.0,
         "1465821240000":1.0,
         "1465821300000":1.0,
         "1465821360000":1.0,
         "1465821420000":1.0,
         "1465821480000":1.0,
         "1465821540000":1.0
      },
      "processedTime":{
         "1465820160000":0.0,
         "1465820220000":0.0,
         "1465820280000":0.0,
         "1465820340000":0.0,
         "1465820400000":0.0,
         "1465820460000":0.02,
         "1465820520000":0.0,
         "1465820580000":0.0,
         "1465820640000":0.0,
         "1465820700000":0.0,
         "1465820760000":0.0,
         "1465820820000":0.0,
         "1465820880000":0.0,
         "1465820940000":0.0,
         "1465821000000":0.0,
         "1465821060000":0.0,
         "1465821120000":0.0,
         "1465821180000":0.0,
         "1465821240000":0.0,
         "1465821300000":0.0,
         "1465821360000":0.0,
         "1465821420000":0.0,
         "1465821480000":0.0,
         "1465821540000":0.0
      }
   }
}
```

### Get complete latency metrics (only available for Source)

`GET /api/v1/metrics/topologies/:topologyId/components/:componentId/complete_latency?from=:from&to=:to`

The `componentId` represents the ID of TopologyComponent. (Source, Processor, Sink)
The `from` and `to` represents `timestamp` which unit is `millisecond`.

*Success Response*

```json
{
   "responseCode":1000,
   "responseMessage":"Success",
   "entity":{
      "1465820280000":0.0,
      "1465820340000":0.0,
      "1465820400000":0.0,
      "1465820460000":49.46,
      "1465820520000":0.0,
      "1465820580000":0.0,
      "1465820640000":0.0,
      "1465820700000":0.0,
      "1465820760000":0.0,
      "1465820820000":0.0,
      "1465820880000":0.0,
      "1465820940000":0.0,
      "1465821000000":0.0,
      "1465821060000":0.0,
      "1465821120000":0.0,
      "1465821180000":0.0,
      "1465821240000":0.0,
      "1465821300000":0.0,
      "1465821360000":0.0,
      "1465821420000":0.0,
      "1465821480000":0.0,
      "1465821540000":0.0
   }
}
```

### Get Kafka Topic offsets (only available for Kafka Source)

`GET /api/v1/metrics/topologies/:topologyId/components/:componentId/kafka_topic_offsets?from=:from&to=:to`

The `componentId` represents the ID of TopologyComponent. (Source, Processor, Sink)
The `from` and `to` represents `timestamp` which unit is `millisecond`.

*Success Response*

```json
{
   "responseCode":1000,
   "responseMessage":"Success",
   "entity":{
      "lag":{
         "1465820220000":0.0,
         "1465820280000":0.0,
         "1465820340000":0.0,
         "1465820400000":0.0,
         "1465820460000":0.0,
         "1465820520000":0.0,
         "1465820580000":0.0,
         "1465820640000":0.0,
         "1465820700000":0.0,
         "1465820760000":0.0,
         "1465820820000":0.0,
         "1465820880000":0.0,
         "1465820940000":0.0,
         "1465821000000":0.0,
         "1465821060000":0.0,
         "1465821120000":0.0,
         "1465821180000":0.0,
         "1465821240000":0.0,
         "1465821300000":0.0,
         "1465821360000":0.0,
         "1465821420000":0.0,
         "1465821480000":0.0,
         "1465821540000":0.0
      },
      "offset":{
         "1465820220000":1330.0,
         "1465820280000":1330.0,
         "1465820340000":1330.0,
         "1465820400000":1330.0,
         "1465820460000":1591.0,
         "1465820520000":1591.0,
         "1465820580000":1591.0,
         "1465820640000":1591.0,
         "1465820700000":1591.0,
         "1465820760000":1591.0,
         "1465820820000":1591.0,
         "1465820880000":1591.0,
         "1465820940000":1591.0,
         "1465821000000":1591.0,
         "1465821060000":1591.0,
         "1465821120000":1591.0,
         "1465821180000":1591.0,
         "1465821240000":1591.0,
         "1465821300000":1591.0,
         "1465821360000":1591.0,
         "1465821420000":1591.0,
         "1465821480000":1591.0,
         "1465821540000":1591.0
      },
      "logsize":{
         "1465820220000":1330.0,
         "1465820280000":1330.0,
         "1465820340000":1330.0,
         "1465820400000":1330.0,
         "1465820460000":1591.0,
         "1465820520000":1591.0,
         "1465820580000":1591.0,
         "1465820640000":1591.0,
         "1465820700000":1591.0,
         "1465820760000":1591.0,
         "1465820820000":1591.0,
         "1465820880000":1591.0,
         "1465820940000":1591.0,
         "1465821000000":1591.0,
         "1465821060000":1591.0,
         "1465821120000":1591.0,
         "1465821180000":1591.0,
         "1465821240000":1591.0,
         "1465821300000":1591.0,
         "1465821360000":1591.0,
         "1465821420000":1591.0,
         "1465821480000":1591.0,
         "1465821540000":1591.0
      }
   }
}
```